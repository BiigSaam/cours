<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Consignes TP4 - Electron</title>
    <link
      rel="stylesheet"
      href="https://danyellow.net/cours-mmi/consignes.css"
    />
  </head>

  <body>
    <header>
      <h1 class="h1">Consignes de la pratique - TP4 - Electron</h1>
      <details class="consignes-conteneur" open>
        <summary>
          <h1 class="h1">Partie 1 (cliquer pour afficher / cacher)</h1>
        </summary>
        <ol class="liste-consignes">
          <li>
            Installez electron via nodejs
            <ul>
              <li>
                <a
                  href="https://www.electronjs.org/docs/latest/tutorial/quick-start"
                  >Accéder au démarrage rapide d'electron</a
                >
              </li>
            </ul>
            <section class="note-information">
              <p>
                Essayez d'avoir la dernière version LTS de Node d'installée. Si
                vous avez besoin de gérer plusieurs versions de Nodejs sur votre
                ordinateur, vous pouvez utiliser un outil comme nvm.
              </p>
              <p>
                <a
                  href="https://github.com/nvm-sh/nvm#installing-and-updating"
                  target="_blank"
                  >Installer nvm</a
                >
              </p>
            </section>
          </li>
          <li>
            Créez votre première application (voir exemple plus bas sur le lien
            précédent)
          </li>
        </ol>
      </details>
      <details class="consignes-conteneur">
        <summary>
          <h1 class="h1">Partie 2 (cliquer pour afficher / cacher)</h1>
        </summary>
        <ol class="liste-consignes">
          <li>
            Créez une communication (IPC) entre le main process et le renderer
            process.
            <ul>
              <li>
                Pour cette étape, ceci peut être un console.log() comme dans
                l'exemple. A noter que le console.log() dans le main process
                s'affiche dans la console de node et non celle de votre
                application
              </li>
            </ul>
          </li>
          <li>
            Créez une autre communication (IPC) entre le main process et le
            renderer process, retournez le résultat et affichez-le dans votre
            application.
          </li>
          <li>
            Créez une troisième communication (IPC) entre le main process et le
            renderer process. Le main process doit récupérer la liste des
            fichiers dans le dossier de votre choix et être affichée dans le
            renderer process.
            <ul>
              <li>
                Il est préférable d'utiliser le package node globby pour
                récupérer la liste des fichiers
                <ul>
                  <li>
                    <a
                      href="https://www.npmjs.com/package/globby"
                      target="_blank"
                      rel="noopener noreferrer"
                      >Accéder à la documentation de globby</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            Pour aller plus loin : affichez la liste des fichiers grâce à la
            balise &lt;template>
          </li>
        </ol>
        <ul>
          <li>
            <a
              href="https://www.electronjs.org/fr/docs/latest/tutorial/ipc"
              target="_blank"
              rel="noopener noreferrer"
              >Accéder à la documentation de IPC (ouverture dans un nouvel
              onglet)</a
            >
          </li>
        </ul>
        <section class="note-information">
          <p>Astuce : Pour éviter d'ouvrir la console du navigateur via le menu <code>View > Toggle Developper Tools</code> ou <code>Ctrl / Cmd + maj + i</code>, vous pouvez rajouter la ligne suivante <code>win.webContents.openDevTools()</code> dans la fonction CreateWindow (celle qui contient la fonction "loadFile()") </p>
        </section>
      </details>
      <details class="consignes-conteneur">
        <summary>
          <h1 class="h1">Partie 3 (cliquer pour afficher / cacher)</h1>
        </summary>
        <ol class="liste-consignes">
          <li>
            Créez un fichier texte (.txt) dans votre dossier de travail
          </li>
          <li>
            Lisez le contenu de ce fichier grâce à nodejs depuis votre main process et affichez-en le contenu dans votre renderer process
          </li>
          <li>
            Modifiez le contenu du fichier et renvoyez la réponse vers le main process puis sauvegardez le fichier texte sous un autre nom
          </li>
        </ol>
        <section class="note-attention">
          <p>Note : Si vous appelez votre évènement dès la création de votre application, il ne sera jamais intercepté par le renderer process. Deux solutions :</p>
          <ul>
            <li>Mettre l'appel d'évènement dans un setTimeout(() => {})</li>
            <li>
              Appeler votre évènement depuis une API native du système d'exploitation. Par exemple, ajouter une nouvelle entrée dans le menu principal de votre application avec le code suivant dans la promesse de "app.whenReady":
<pre>
  <code id="htmlViewer" style="color:rgb(255, 255, 255); font-weight:400;background-color:rgb(28, 27, 27);background:rgb(28, 27, 27);display:block;padding: .5em;"><span style="color:rgb(136, 174, 206); font-weight:400;">const</span> mainMenu = [
      <span style="color:rgb(153, 153, 153); font-weight:400;">// Contient les données actuelle du menu principal</span>
      ...<span class="hljs-title class_">Menu</span>.<span class="hljs-title function_">getApplicationMenu</span>().<span style="color:rgb(255, 255, 255); font-weight:400;">items</span>,
      {
        <span style="color:rgb(136, 174, 206); font-weight:400;">label</span>: <span style="color:rgb(181, 189, 104); font-weight:400;">&quot;Main Process&quot;</span>,
        <span style="color:rgb(136, 174, 206); font-weight:400;">submenu</span>: [
          {
            <span style="color:rgb(153, 153, 153); font-weight:400;">// Nouvelle entrée de menu</span>
            <span style="color:rgb(136, 174, 206); font-weight:400;">label</span>: <span style="color:rgb(181, 189, 104); font-weight:400;">&quot;Évènement&quot;</span>,
            <span style="color:rgb(136, 174, 206); font-weight:400;">click</span>: <span style="color:rgb(255, 255, 255); font-weight:400;">() =&gt;</span> {
              win.<span style="color:rgb(255, 255, 255); font-weight:400;">webContents</span>.<span class="hljs-title function_">send</span>(<span style="color:rgb(181, 189, 104); font-weight:400;">&quot;my_event&quot;</span>, <span style="color:rgb(181, 189, 104); font-weight:400;">&quot;hello world&quot;</span>);
            },
          },
        ],
      },
  ];
  
  <span style="color:rgb(136, 174, 206); font-weight:400;">const</span> menu = <span class="hljs-title class_">Menu</span>.<span class="hljs-title function_">buildFromTemplate</span>(mainMenu);
  <span class="hljs-title class_">Menu</span>.<span class="hljs-title function_">setApplicationMenu</span>(menu);</code></pre>
            </li>
          </ul>
        </section>
      </details>
      <details class="consignes-conteneur">
        <summary>
          <h1 class="h1">Partie 4 (cliquer pour afficher / cacher)</h1>
        </summary>
        <ol class="liste-consignes">
          <li>
            Etablissez une communication permettant d'effectuer un appel d'API
          </li>
          <li>Affichez le résultat dans le main renderer</li>
        </ol>
        <ul>
          <li>Si vous n'avez pas d'API à exploiter sous la main, vous pouvez reprendre un de celles proposées dans le TP1.
            <a href="https://download-directory.github.io/?url=https://github.com/DanYellow/cours/tree/main/developpement-front-s5/travaux-pratiques/numero-1/ressources" target="_blank" rel="noopener noreferrer">Télécharger le TP1</a>
          </li>
        </ul>
      </details>
    </header>
  </body>
</html>
